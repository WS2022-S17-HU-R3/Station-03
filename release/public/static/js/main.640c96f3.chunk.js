(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],{14:function(e,t,c){},15:function(e,t,c){},17:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c.n(n),o=c(6),s=c.n(o),i=(c(14),c(2)),r=(c(15),c(9)),l=c(0);function u(e){var t=e.checkIn,c=e.checkOut,a=e.adults,o=e.accomodations,s=e.selectedAccomodation,r=Object(n.useState)(""),u=Object(i.a)(r,2),d=u[0],j=u[1],b=Object(n.useState)(""),h=Object(i.a)(b,2),m=h[0],O=h[1],f=Object(n.useState)(null),x=Object(i.a)(f,2),g=x[0],p=x[1];return g?Object(l.jsxs)("div",{children:[Object(l.jsx)("h1",{children:"Booking saved!"}),Object(l.jsxs)("p",{children:["Your booking id is: ",g,"."]}),Object(l.jsx)("button",{onClick:function(){return window.location="/"},className:"btn btn-secondary",children:"Back to home"})]}):m?Object(l.jsxs)("div",{children:[Object(l.jsx)("div",{className:"alert alert-danger",children:"An error happened during your booking! :("}),Object(l.jsx)("pre",{children:m}),Object(l.jsx)("button",{onClick:function(){return window.location="/"},className:"btn btn-secondary",children:"Back to home"})]}):Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("h1",{children:["Send booking for ",o.find((function(e){return e.id==s})).name]}),Object(l.jsx)("div",{children:Object(l.jsxs)("b",{children:[t," - ",c]})}),Object(l.jsxs)("div",{children:[Object(l.jsx)("b",{children:a})," adults"]}),Object(l.jsxs)("div",{className:"form-group mb-4",children:[Object(l.jsx)("label",{htmlFor:"comment",children:"Leave a comment (optional)"}),Object(l.jsx)("textarea",{id:"comment",className:"form-control",value:d,onChange:function(e){return j(e.target.value)}})]}),Object(l.jsx)("button",{className:"btn btn-primary",onClick:function(){fetch("http://localhost:8000/api/bookings",{method:"POST",body:JSON.stringify({checkIn:new Date(t).toJSON(),checkOut:new Date(c).toJSON(),accomodationId:s,comment:d,bookingDate:(new Date).toJSON()})}).then((function(e){200===e.status?e.json().then((function(e){var t=e.id;return p(t)})):e.text().then(O)}))},children:"Send booking"})]})}function d(e,t){return(e=new Date(e)).setDate(e.getDate()+t)}function j(e,t){for(var c=[],n=e;n<=t;)c.push(new Date(n)),n=d(n,1);return c}function b(e,t,c){return c>=e&&c<=t}function h(e){var t=e.accomodation,c=(e.adults,e.checkIn),a=e.checkOut,o=Object(n.useState)([]),s=Object(i.a)(o,2),r=s[0],u=s[1],h=Object(n.useState)([]),m=Object(i.a)(h,2),O=m[0],f=m[1];return Object(n.useEffect)((function(){fetch("http://localhost:8000/api/accomodations/"+t+"/bookings").then((function(e){return e.json()})).then((function(e){return u(e.map((function(e){return j(+new Date(e.checkIn),+new Date(e.checkOut))})).flat())}))}),[t]),Object(n.useEffect)((function(){var e,t,n=(e=c,t=10,(e=new Date(e)).setDate(e.getDate()-t)),o=d(a,10);f(j(n,o))}),[a,c]),Object(l.jsx)("div",{className:"calendar",children:O.map((function(e){return Object(l.jsx)("div",{className:"calendar-day calendar-day-of-week-".concat(e.getDay()," ").concat(r.find((function(t){return+t===+e}))?"booked":""," ").concat(b(c,a,e)?"selected":""," ").concat(+c===+e?"check-in":""," ").concat(+a===+e?"check-out":""),children:e.getUTCDate()})}))})}function m(e){var t=e.checkIn,c=e.checkOut,n=e.adults,a=e.accomodations,o=e.selectedAccomodation;return e.booking?Object(l.jsx)(u,{checkIn:t,checkOut:c,adults:n,accomodations:a,selectedAccomodation:o}):t&&c?Object(l.jsx)(h,{accomodation:o,checkIn:new Date(t),checkOut:new Date(c),adults:n}):Object(l.jsx)(O,{accomodations:a})}function O(e){var t=e.accomodations,c=Object(n.useState)(JSON.parse(localStorage.getItem("favs"))||[]),a=Object(i.a)(c,2),o=a[0],s=a[1],u=Object(n.useState)(!1),d=Object(i.a)(u,2),j=d[0],b=d[1];return Object(n.useEffect)((function(){localStorage.setItem("favs",JSON.stringify(o))}),[o]),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("div",{className:"custom-control custom-checkbox",children:[Object(l.jsx)("input",{type:"checkbox",className:"custom-control-input",id:"favsToggle",onChange:function(e){return b(e.target.checked)},value:j}),Object(l.jsx)("label",{className:"custom-control-label",htmlFor:"favsToggle",children:j?"Show all":"Show favourites"})]}),Object(l.jsx)("div",{className:"row",children:t.filter((function(e){return!j||o.includes(e.id)})).map((function(e){return Object(l.jsx)("div",{className:"col-4 col-md-3 p-2",children:Object(l.jsxs)("div",{className:"card h-100",children:[Object(l.jsx)("img",{src:"/img/"+e.img,className:"card-img-top",alt:"image"}),o.includes(e.id)?Object(l.jsx)("button",{className:"btn btn-sm btn-secondary",onClick:function(){return function(e){s((function(t){return t.filter((function(t){return t!==e.id}))}))}(e)},children:"Remove from favourites"}):Object(l.jsx)("button",{className:"btn btn-sm btn-secondary",onClick:function(){return function(e){s((function(t){return[].concat(Object(r.a)(t),[e.id])}))}(e)},children:"Add to favourites"}),Object(l.jsxs)("div",{className:"card-body",children:[Object(l.jsx)("h5",{className:"card-title",children:e.name}),Object(l.jsx)("p",{className:"card-text",children:e.description})]})]})})}))})]})}var f=c(7),x=c(8);var g=function(){var e,t=Object(n.useState)(localStorage.getItem("lang")||"hu"),c=Object(i.a)(t,2),a=c[0],o=c[1];Object(n.useEffect)((function(){localStorage.setItem("lang",a)}),[a]),e="hu"===a?f:x;var s=Object(n.useState)([]),r=Object(i.a)(s,2),u=r[0],d=r[1],j=Object(n.useState)(1),b=Object(i.a)(j,2),h=b[0],O=b[1],g=Object(n.useState)(""),p=Object(i.a)(g,2),v=p[0],k=p[1],N=Object(n.useState)(""),S=Object(i.a)(N,2),w=S[0],y=S[1],C=Object(n.useState)(1),D=Object(i.a)(C,2),I=D[0],F=D[1],J=Object(n.useState)(!1),A=Object(i.a)(J,2),E=A[0],B=A[1];Object(n.useEffect)((function(){fetch("http://localhost:8000/api/accomodations").then((function(e){return e.json()})).then((function(e){return d(e)}))}),[]);var T,z=0===u.length?0:I*u.find((function(e){return h==e.id})).price*(T=new Date(v),(new Date(w)-T)/1e3/24/3600);return Object(l.jsx)("div",{children:Object(l.jsxs)("div",{className:"vw-100 vh-100 p-5 bg-light container-fluid",children:[Object(l.jsxs)("div",{className:"btn-group btn-group-sm",style:{position:"fixed",top:"8px",right:"82px"},children:[Object(l.jsx)("button",{className:"btn btn-primary",onClick:function(){return o("hu")},children:"Magyar"}),Object(l.jsx)("button",{className:"btn btn-primary",onClick:function(){return o("en")},children:"English"})]}),Object(l.jsx)("div",{className:"card rounded-3 p-5 mx-5 mb-5 form-row",children:Object(l.jsxs)("div",{className:"form-inline d-flex align-items-end",children:[Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{htmlFor:"checkIn",children:e["select-accomodation"]}),Object(l.jsx)("select",{value:h,onChange:function(e){return O(e.target.value)},className:"form-select",children:u.map((function(e){return Object(l.jsx)("option",{value:e.id,children:e.name},e.id)}))})]}),Object(l.jsxs)("div",{className:"form-group px-3",children:[Object(l.jsx)("label",{htmlFor:"checkIn",children:e["check-in"]}),Object(l.jsx)("input",{value:v,onChange:function(e){return k(e.target.value)},type:"date",id:"checkIn",className:"form-control"})]}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{htmlFor:"checkOut",children:e["check-out"]}),Object(l.jsx)("input",{value:w,onChange:function(e){return y(e.target.value)},type:"date",id:"checkOut",className:"form-control"})]}),Object(l.jsxs)("div",{className:"form-group px-3",children:[Object(l.jsx)("label",{htmlFor:"adults",children:e.adults}),Object(l.jsx)("input",{value:I,onChange:function(e){return F(e.target.value)},type:"number",min:1,max:8,id:"adults",className:"form-control"})]}),h&&v&&w&&Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{children:Object(l.jsxs)("h6",{children:[z," EUR"]})}),Object(l.jsx)("div",{className:"px-3",children:Object(l.jsx)("button",{type:"button",onClick:function(){B(!0)},className:"btn btn-primary",children:"Book"})})]})]})}),Object(l.jsx)("div",{className:"card p-5 mt-5 mx-5",children:Object(l.jsx)(m,{checkIn:v,checkOut:w,selectedAccomodation:h,adults:I,booking:E,accomodations:u})})]})})},p=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,18)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,o=t.getLCP,s=t.getTTFB;c(e),n(e),a(e),o(e),s(e)}))};s.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(g,{})}),document.getElementById("root")),p()},7:function(e){e.exports=JSON.parse('{"select-accomodation":"V\xe1lasszon Sz\xe1ll\xe1st","check-in":"Bejelentkez\xe9s","check-out":"Kijelentkez\xe9s","adults":"Feln\u0151ttek sz\xe1ma"}')},8:function(e){e.exports=JSON.parse('{"select-accomodation":"Select Accomodation","check-in":"Check in","check-out":"Check out","adults":"Adults"}')}},[[17,1,2]]]);
//# sourceMappingURL=main.640c96f3.chunk.js.map