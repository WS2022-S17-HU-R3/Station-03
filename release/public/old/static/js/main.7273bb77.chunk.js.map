{"version":3,"sources":["App.js","reportWebVitals.js","index.js"],"names":["AuthContext","createContext","authenticated","AdminLayout","children","context","useContext","history","useHistory","className","to","onClick","setAuthenticated","push","AccomodationsPage","useState","accomodations","setAccomodations","useEffect","fetch","then","response","json","data","map","accomodation","name","price","description","BookingsPage","bookings","setBookings","filter","setFilter","type","placeholder","onChange","e","target","value","booking","checkIn","checkOut","bookingDate","comment","id","method","headers","Accept","res","status","val","b","r","alert","message","deleteBooking","LoginPage","onAuthenticated","username","setUsername","password","setPassword","error","setError","onSubmit","preventDefault","stopPropagation","role","htmlFor","disabled","NotFoundPage","App","Provider","path","component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.7273bb77.chunk.js","sourcesContent":["import {createContext, useContext, useEffect, useState} from \"react\";\nimport {BrowserRouter, Link, Redirect, Route, Switch, useHistory, useLocation} from \"react-router-dom\";\n\nconst AuthContext = createContext({authenticated: false});\n\nfunction AdminLayout({children}) {\n    const context = useContext(AuthContext);\n    const history = useHistory();\n\n    function logout() {\n        context.setAuthenticated(false)\n        history.push('/login')\n    }\n\n    return <div>\n        <nav className=\"navbar navbar-expand-lg navbar-light bg-light px-2 d-flex justify-content-between\">\n            <div className=\"d-flex\">\n                <a className=\"navbar-brand\">Admin</a>\n                <ul className=\"nav mr-auto\">\n                    <li className=\"nav-item\">\n                        <Link className=\"nav-link\" to=\"/admin/bookings\">Bookings</Link>\n                    </li>\n                    <li className=\"nav-item\">\n                        <Link className=\"nav-link\" to=\"/admin/accomodations\">Accomodations</Link>\n                    </li>\n                </ul>\n            </div>\n            <span className=\"navbar-text\">\n                <button className=\"btn btn-secondary btn-sm\" onClick={logout}><i\n                    className=\"fa fa-logout\"/> Log out</button>\n            </span>\n        </nav>\n\n        {children}\n    </div>\n}\n\nfunction AccomodationsPage() {\n    const [accomodations, setAccomodations] = useState([]);\n    useEffect(() => {\n        fetch('http://localhost/api/accomodations').then(response => response.json()).then(data => setAccomodations(data));\n    }, []);\n    return <AdminLayout>\n        <div className=\"container\">\n            <div className=\"row row-cols-3\">\n                {\n                    accomodations.map(accomodation => (<div className=\"col-3 p-2\">\n                        <div className=\"card p-4\">\n                            <h4>{accomodation.name}</h4>\n                            <h6>Price: {accomodation.price} EUR</h6>\n                            <p className=\"text-muted\">{accomodation.description}</p>\n                        </div>\n                    </div>))\n                }\n            </div>\n        </div>\n    </AdminLayout>\n}\n\nfunction BookingsPage() {\n    const [bookings, setBookings] = useState([]);\n    const [filter, setFilter] = useState(\"\");\n\n    useEffect(() => {\n        fetch('http://localhost/api/bookings' + (filter !== \"\" ? \"?comment=\" + filter : '')).then(response => response.json()).then(data => setBookings(data));\n    }, [filter]);\n\n    function deleteBooking(id) {\n        try {\n            fetch('http://localhost/api/bookings/' + id, {method: 'DELETE', headers: {Accept: 'application/json'}})\n                .then((res) => res.status === 200 ? setBookings(val => val.filter(b => b.id !== id)) : res.json().then(r => alert(r.message)));\n        } catch (e) {\n            alert(e);\n        }\n    }\n\n    return <AdminLayout>\n        <div className=\"container\">\n            <input className=\"form-control mt-2\" type=\"text\" placeholder=\"search\"\n                   onChange={e => setFilter(e.target.value)} value={filter}/>\n            <div className=\"row row-cols-1\">\n                {\n                    bookings.map(booking => (\n                            <div className=\"col p-2\">\n                                <div className=\"card p-4\">\n                                    <h6>{booking.checkIn} - {booking.checkOut}</h6>\n                                    <h6>Booking date: {booking.bookingDate}</h6>\n                                    <p className=\"text-muted\">{booking.comment}</p>\n                                    <button className=\"btn btn-danger w-25\" onClick={() => deleteBooking(booking.id)}>delete\n                                        booking\n                                    </button>\n                                </div>\n                            </div>\n                        )\n                    )\n                }\n            </div>\n        </div>\n    </AdminLayout>\n}\n\nfunction App() {\n    const [authenticated, setAuthenticated] = useState(false);\n    return (\n        <AuthContext.Provider value={{authenticated, setAuthenticated}}>\n            <Switch>\n\n                <Route path=\"/login\" component={LoginPage}/>\n                {\n                    !authenticated && <Redirect to=\"/login\"/>\n                }\n                <Route path=\"/admin/bookings\" component={BookingsPage}/>\n                <Route path=\"/admin/accomodations\" component={AccomodationsPage}/>\n                <Route component={NotFoundPage}/>\n            </Switch>\n        </AuthContext.Provider>\n    );\n}\n\nfunction LoginPage({onAuthenticated}) {\n    const [username, setUsername] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n    const [error, setError] = useState(false);\n    const history = useHistory();\n    const context = useContext(AuthContext);\n\n    function handleSubmit(e) {\n        e.preventDefault();\n        e.stopPropagation();\n\n        if (username === \"admin\" && password === \"123\") {\n            setError(false);\n            context.setAuthenticated(true);\n            history.push('/admin/accomodations');\n        } else {\n            setError(true);\n        }\n    }\n\n    return <div className=\"d-flex justify-content-center align-items-center vw-100 vh-100\">\n        <form className=\"shadow-lg rounded-3 mx-auto mb-5 w-25 p-3 bg-white\" onSubmit={handleSubmit}>\n            <h1><b>Login</b></h1>\n            {\n                error && <div className=\"alert alert-danger\" role=\"alert\">\n                    Wrong username or password!\n                </div>\n            }\n            <div className=\"form-group\">\n                <label htmlFor=\"usernameInput\">Username</label>\n                <input type=\"text\" className=\"form-control\" placeholder=\"Username\" id=\"usernameInput\" value={username}\n                       onChange={e => setUsername(e.target.value)}/>\n            </div>\n            <div className=\"form-group mt-2\">\n                <label htmlFor=\"passwordInput\">Password</label>\n                <input type=\"password\" className=\"form-control\" placeholder=\"Password\" id=\"passwordInput\"\n                       value={password} onChange={e => setPassword(e.target.value)}/>\n            </div>\n            <div className=\"d-flex justify-content-end mt-4\">\n                <button type=\"submit\" className=\"btn btn-primary text-white rounded-3 py-2\"\n                        disabled={username === \"\" || password === \"\"}>Log in\n                </button>\n            </div>\n        </form>\n    </div>\n}\n\nfunction NotFoundPage() {\n    return <h1>NotFoundPage</h1>\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport {BrowserRouter} from \"react-router-dom\";\n\nReactDOM.render(\n    <React.StrictMode>\n        <BrowserRouter>\n            <App/>\n        </BrowserRouter>\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}